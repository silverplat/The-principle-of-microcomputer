;将开关K7-K0输入的二进制数转化为十进制数显示在最右侧的1-3个数码管上要求可以动态显示
A8255_CON EQU 0606H
A8255_A EQU 0600H
A8255_B EQU 0602H
A8255_C EQU 0604H
 
PUBLIC LED1
PUBLIC LED2
PUBLIC LED3
DATA SEGMENT
LED1 DB ?
LED2 DB ?
LED3 DB ?
TABLE1:
    DB 3FH
    DB 06H
    DB 5BH
    DB 4FH
    DB 66H
    DB 6DH
    DB 7DH
    DB 07H
    DB 7FH
    DB 6FH
DATA ENDS
 
CODE SEGMENT
    ASSUME CS:CODE,DS:DATA
START:
    MOV AX,DATA
    MOV DS,AX
    LEA SI,TABLE1
    MOV DX,A8255_CON
    MOV AL,89H
    OUT DX,AL
    MOV DX,A8255_B
    MOV AL,3FH
    OUT DX,AL
    MOV DX,A8255_A
    MOV AL,00H
    OUT DX,AL
X2:    
    MOV DX,A8255_C
    IN AL,DX
    MOV AH,00H
    MOV BL,0AH
    DIV BL
    MOV LED1, AH
    MOV AH,00H
    DIV BL
    MOV LED2, AH
    MOV AH,00H
    DIV BL
    MOV LED3, AH
    MOV CX,03H
    MOV BX,0000H
    MOV AL,11011111B
    MOV DX,A8255_A
    OUT DX,AL
    MOV BX,OFFSET LED1
    MOV BX,[BX]
    MOV BH,00H
    MOV AL,[BX+SI]
    MOV DX,A8255_B
    OUT DX,AL
    CALL DELAY
    MOV AL,00H
    OUT DX,AL
    MOV AL,11101111B
    MOV DX,A8255_A
    OUT DX,AL
    MOV BX,OFFSET LED2
    MOV BX,[BX]
    MOV BH,00H
    MOV AL,[BX+SI]
    MOV DX,A8255_B
    OUT DX,AL
    CALL DELAY
    MOV AL,00H
    OUT DX,AL
    MOV AL,11110111B
    MOV DX,A8255_A
    OUT DX,AL
    MOV BX,OFFSET LED3
    MOV BX,[BX]
    MOV BH,00H
    MOV AL,[BX+SI]
    MOV DX,A8255_B
    OUT DX,AL
    CALL DELAY
    MOV AL,00H
    OUT DX,AL
    JMP X2    
DELAY:
    PUSH CX
    MOV CX,0FFH
X4:
    LOOP X4
    POP CX
    RET
CODE ENDS
     END START