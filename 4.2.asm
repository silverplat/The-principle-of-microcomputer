CODE SEGMENT
	ASSUME CS:CODE
START:
	MOV AL,80H
	MOV DX,0686H
	OUT DX,AL
	
	MOV AX,0H
	MOV DS,AX
	
	MOV AX,OFFSET MIR6
	MOV SI,0038H
	MOV [SI],AX
	MOV AX,CS
	MOV SI,003AH
	MOV [SI],AX
	
	CLI
	MOV AL,11H
	OUT 20H,AL
	MOV AL,08H
	OUT 21H,AL
	MOV AL,04H
	OUT 21H,AL
	MOV AL,03H
	OUT 21H,AL
	MOV AL,10101111B
	OUT 21H,AL
	STI
A1:	
	CLI
	MOV DX,0640H	
	OUT DX,AL		;START A/D
	
	MOV CX,0FFFFH
	LOOP $
	STI
	
	JMP A1
	
MIR6:
	STI
	MOV DX,0640H
	IN AL,DX
	MOV DX,0682H
	OUT DX,AL
	
	IRET	
	
CODE ENDS
	END START
